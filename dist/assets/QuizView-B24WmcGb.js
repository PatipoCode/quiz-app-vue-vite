import{l,j as o,p as u,h as _,q as h,n,_ as C,a as b,m as r,s as w,t as c,F as g,v as B,u as D,c as a,x as N,y as E,z as G,A as j,B as P,r as R,o as U,d as H,i as v,w as m,C as J,D as W,M as X}from"./index-Cq6DSGY0.js";import{S as Y}from"./ScreenLayout-BuLKmJ_W.js";import{Q as Z,P as ee}from"./QuestionOption-oi6v2D9y.js";import{B as te}from"./BaseButton-Bs8FQ3nX.js";const oe={xmlns:"http://www.w3.org/2000/svg",width:"10",height:"16",fill:"none"};function se(p,s){return o(),l("svg",oe,[...s[0]||(s[0]=[u("path",{stroke:"currentColor","stroke-linecap":"round","stroke-width":"2.5",d:"m8.268 1.25-6.5 6.5 6.5 6.5"},null,-1)])])}const ne={render:se},ae={class:"back-button",type:"button","aria-label":"Back"},le=_({__name:"BackButton",setup(p){return(s,e)=>(o(),l("button",ae,[h(n(ne),{class:"back-button__icon","aria-hidden":"true"})]))}}),ie=C(le,[["__scopeId","data-v-b20f83e7"]]),re=["src"],ue={class:"options__tile-label"},ce=_({__name:"GenderOption",props:{option:{}},setup(p){const{t:s}=b();return(e,i)=>(o(),l(g,null,[n(w)(e.option.labelKey)?(o(),l("img",{key:0,src:n(w)(e.option.labelKey),alt:"",class:"options__tile-emoji","aria-hidden":"true"},null,8,re)):r("",!0),u("span",ue,c(n(s)(e.option.labelKey)),1)],64))}}),pe=["src"],_e={class:"options__bubble-label"},de=_({__name:"TopicOption",props:{option:{}},setup(p){const{t:s}=b();return(e,i)=>(o(),l(g,null,[n(B)(e.option.labelKey)?(o(),l("img",{key:0,src:n(B)(e.option.labelKey),alt:"",class:"options__bubble-icon","aria-hidden":"true"},null,8,pe)):r("",!0),u("span",_e,c(n(s)(e.option.labelKey)),1)],64))}}),ve={class:"options__tile-label","aria-hidden":"true"},me=_({__name:"DefaultOption",props:{option:{}},setup(p){const{t:s}=b();return(e,i)=>(o(),l("span",ve,c(n(s)(e.option.labelKey)),1))}}),he={key:0,class:"quiz-loader"},be={class:"quiz-loader__text"},ye={class:"accent"},fe={key:0,class:"subtitle","aria-live":"polite"},ge=_({__name:"QuizView",setup(p){const s=H(),e=D(),{t:i}=b(),t=a(()=>e.currentQuestion),Q=a(()=>e.current+1),$=a(()=>e.total+1),y=a(()=>N(t.value?.type)),I=a(()=>E(t.value)),K=a(()=>t.value?e.answers[t.value.id]??[]:[]),x=a(()=>!!(t.value&&e.answers[t.value.id]?.length)),z=a(()=>e.current>=e.total-1),T=a(()=>G(t.value)),q=a(()=>j(t.value)),F=a(()=>P(t.value)),d=R(!1),S=a(()=>T.value?ce:y.value==="bubble"&&q.value?de:me),L=f=>{t.value&&(y.value==="single"?e.setSingleAnswer(t.value.id,f):e.toggleMultipleAnswer(t.value.id,f,X))},O=()=>{if(e.current===0)return s.replace("/");e.back()};U(async()=>{if(!e.language)return s.replace("/");e.questions.length||(d.value=!0,await e.loadQuestions(),d.value=!1)});const M=async()=>{z.value?await s.push({name:"loader"}):(e.next(),window.scrollTo({top:0,behavior:"smooth"}))};return(f,k)=>{const V=J("i18n-t");return o(),v(Y,null,{header:m(()=>[d.value?r("",!0):(o(),v(ie,{key:0,onClick:O})),n(e).total>0?(o(),v(ee,{key:1,current:Q.value,total:$.value,rounded:""},null,8,["current","total"])):r("",!0)]),default:m(()=>[d.value?(o(),l("div",he,[k[0]||(k[0]=u("div",{class:"quiz-loader__spinner"},null,-1)),u("p",be,c(n(i)("question.loading")),1)])):t.value?(o(),l(g,{key:1},[h(V,{keypath:t.value.titleKey,tag:"h1",class:"title","aria-live":"polite"},{hl:m(()=>[u("span",ye,c(n(i)("word.highlight")),1)]),_:1},8,["keypath"]),t.value.subtitleKey?(o(),l("p",fe,c(n(i)(t.value.subtitleKey)),1)):r("",!0),h(Z,{type:y.value,options:I.value,"selected-ids":K.value,variant:F.value,onSelect:L},{option:m(({option:A})=>[(o(),v(W(S.value),{option:A},null,8,["option"]))]),_:1},8,["type","options","selected-ids","variant"]),h(te,{disabled:!x.value,title:n(i)("button.next"),onClick:M},null,8,["disabled","title"])],64)):r("",!0)]),_:1})}}}),Qe=C(ge,[["__scopeId","data-v-9fe76a69"]]);export{Qe as default};
