import{u as m,a2 as _,l as g,j as b,p as o,h as C,a as y,i as L,w as f,q as h,n as a,t as p,d as S,_ as j}from"./index-Cq6DSGY0.js";import{S as x}from"./ScreenLayout-BuLKmJ_W.js";import{B as A}from"./BaseButton-Bs8FQ3nX.js";const B="/quiz-app-vue-vite/assets/checkmark-green-CZdYg4fb.png";function R(){const r=m(),e=s=>r.questions.map((t,i)=>{const c=new Set(r.answers[t.id]??[]),d=t.options.filter(n=>c.has(n.id)).map(n=>s(n.labelKey));return{order:i+1,title:s(t.titleKey),type:t.type,answer:d.join("; ")}}),u=s=>{const t=String(s??"");return/[",\n\r]/.test(t)?`"${t.replace(/"/g,'""')}"`:t};return{downloadAnswersAsCsv:s=>{const t=e(s),c=[_.join(","),...t.map(k=>_.map(v=>u(k[v])).join(","))].join(`\r
`),l=new Blob([c],{type:"text/csv;charset=utf-8"}),d=URL.createObjectURL(l),n=document.createElement("a");n.href=d,n.download=`quiz-answers-${r.language}.csv`,document.body.appendChild(n),n.click(),n.remove(),URL.revokeObjectURL(d)},getAnswerRows:e}}const z={xmlns:"http://www.w3.org/2000/svg",width:"42",height:"42",fill:"none"};function V(r,e){return b(),g("svg",z,[...e[0]||(e[0]=[o("path",{stroke:"currentColor","stroke-linecap":"round","stroke-width":"2.5",d:"M21 8v18"},null,-1),o("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2.5",d:"m15 20 6 6 6-6M8 28v4h26v-4"},null,-1)])])}const U={render:V},O={class:"title cursive"},q={class:"subtitle"},D=["aria-label"],E={class:"final-screen__download-label"},I=C({__name:"FinalView",setup(r){const{t:e}=y(),u=S(),{downloadAnswersAsCsv:w}=R(),s=()=>{w(e)},t=m(),i=async()=>{t.retakeQuiz(),await u.replace({name:"language"})};return(c,l)=>(b(),L(x,null,{header:f(()=>[o("h1",O,p(a(e)("final.title")),1),o("p",q,p(a(e)("final.subtitle")),1)]),default:f(()=>[l[0]||(l[0]=o("img",{src:B,alt:"","aria-hidden":"true",class:"final-screen__badge"},null,-1)),o("button",{class:"final-screen__download",type:"button",onClick:s,"aria-label":a(e)("final.download_label")},[h(a(U),{class:"final-screen__download-icon","aria-hidden":"true"}),o("span",E,p(a(e)("final.download")),1)],8,D),h(A,{title:a(e)("button.retake"),onClick:i},null,8,["title"])]),_:1}))}}),$=j(I,[["__scopeId","data-v-07a4b59e"]]);export{$ as default};
