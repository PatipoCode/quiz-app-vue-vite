import{r as Z,N as Pe,c as j,O as h,n as _,o as Vt,Q as Se,R as fe,S as Wt,T as Kt,U as J,V as Gt,K as Ht,W as et,X as Yt,Y as Ye,a as Ot,h as St,l as st,j as Ze,p as ne,m as Zt,Z as Qt,t as oe,$ as Xt,E as Jt,_ as At,u as er,d as tr,i as rr,w as We,q as ct,a0 as nr,I as Ke,a1 as ir}from"./index-Cq6DSGY0.js";import{S as ar}from"./ScreenLayout-BuLKmJ_W.js";import{B as lr}from"./BaseButton-Bs8FQ3nX.js";/**
  * vee-validate v4.15.1
  * (c) 2025 Abdelrahman Awad
  * @license MIT
  */function $(e){return typeof e=="function"}function Et(e){return e==null}const ve=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function tt(e){return Number(e)>=0}function or(e){const t=parseFloat(e);return isNaN(t)?e:t}function ur(e){return typeof e=="object"&&e!==null}function sr(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function dt(e){if(!ur(e)||sr(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Ae(e,t){return Object.keys(t).forEach(r=>{if(dt(t[r])&&dt(e[r])){e[r]||(e[r]={}),Ae(e[r],t[r]);return}e[r]=t[r]}),e}function Ve(e){const t=e.split(".");if(!t.length)return"";let r=String(t[0]);for(let a=1;a<t.length;a++){if(tt(t[a])){r+=`[${t[a]}]`;continue}r+=`.${t[a]}`}return r}const cr={};function dr(e){return cr[e]}function ft(e,t,r){typeof r.value=="object"&&(r.value=w(r.value)),!r.enumerable||r.get||r.set||!r.configurable||!r.writable||t==="__proto__"?Object.defineProperty(e,t,r):e[t]=r.value}function w(e){if(typeof e!="object")return e;var t=0,r,a,o,l=Object.prototype.toString.call(e);if(l==="[object Object]"?o=Object.create(e.__proto__||null):l==="[object Array]"?o=Array(e.length):l==="[object Set]"?(o=new Set,e.forEach(function(f){o.add(w(f))})):l==="[object Map]"?(o=new Map,e.forEach(function(f,d){o.set(w(d),w(f))})):l==="[object Date]"?o=new Date(+e):l==="[object RegExp]"?o=new RegExp(e.source,e.flags):l==="[object DataView]"?o=new e.constructor(w(e.buffer)):l==="[object ArrayBuffer]"?o=e.slice(0):l.slice(-6)==="Array]"&&(o=new e.constructor(e)),o){for(a=Object.getOwnPropertySymbols(e);t<a.length;t++)ft(o,a[t],Object.getOwnPropertyDescriptor(e,a[t]));for(t=0,a=Object.getOwnPropertyNames(e);t<a.length;t++)Object.hasOwnProperty.call(o,r=a[t])&&o[r]===e[r]||ft(o,r,Object.getOwnPropertyDescriptor(e,r))}return o||e}const rt=Symbol("vee-validate-form"),fr=Symbol("vee-validate-form-context"),vr=Symbol("vee-validate-field-instance"),vt=Symbol("Default empty value"),mr=typeof window<"u";function Qe(e){return $(e)&&!!e.__locatorRef}function Q(e){return!!e&&$(e.parse)&&e.__type==="VVTypedSchema"}function Ce(e){return!!e&&$(e.validate)}function jt(e){return e==="checkbox"||e==="radio"}function hr(e){return ve(e)||Array.isArray(e)}function pr(e){return Array.isArray(e)?e.length===0:ve(e)&&Object.keys(e).length===0}function ke(e){return/^\[.+\]$/i.test(e)}function yr(e){return wt(e)&&e.multiple}function wt(e){return e.tagName==="SELECT"}function br(e){return It(e)&&e.target&&"submit"in e.target}function It(e){return e?!!(typeof Event<"u"&&$(Event)&&e instanceof Event||e&&e.srcElement):!1}function z(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,a,o;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(a=r;a--!==0;)if(!z(e[a],t[a]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(a of e.entries())if(!t.has(a[0]))return!1;for(a of e.entries())if(!z(a[1],t.get(a[0])))return!1;return!0}if(ht(e)&&ht(t))return!(e.size!==t.size||e.name!==t.name||e.lastModified!==t.lastModified||e.type!==t.type);if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(a of e.entries())if(!t.has(a[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(a=r;a--!==0;)if(e[a]!==t[a])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(e=mt(e),t=mt(t),o=Object.keys(e),r=o.length,r!==Object.keys(t).length)return!1;for(a=r;a--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[a]))return!1;for(a=r;a--!==0;){var l=o[a];if(!z(e[l],t[l]))return!1}return!0}return e!==e&&t!==t}function mt(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0))}function ht(e){return mr?e instanceof File:!1}function nt(e){return ke(e)?e.replace(/\[|\]/gi,""):e}function L(e,t,r){return e?ke(t)?e[nt(t)]:(t||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((o,l)=>hr(o)&&l in o?o[l]:r,e):r}function re(e,t,r){if(ke(t)){e[nt(t)]=r;return}const a=t.split(/\.|\[(\d+)\]/).filter(Boolean);let o=e;for(let l=0;l<a.length;l++){if(l===a.length-1){o[a[l]]=r;return}(!(a[l]in o)||Et(o[a[l]]))&&(o[a[l]]=tt(a[l+1])?[]:{}),o=o[a[l]]}}function Ge(e,t){if(Array.isArray(e)&&tt(t)){e.splice(Number(t),1);return}ve(e)&&delete e[t]}function pt(e,t){if(ke(t)){delete e[nt(t)];return}const r=t.split(/\.|\[(\d+)\]/).filter(Boolean);let a=e;for(let l=0;l<r.length;l++){if(l===r.length-1){Ge(a,r[l]);break}if(!(r[l]in a)||Et(a[r[l]]))break;a=a[r[l]]}const o=r.map((l,f)=>L(e,r.slice(0,f).join(".")));for(let l=o.length-1;l>=0;l--)if(pr(o[l])){if(l===0){Ge(e,r[0]);continue}Ge(o[l-1],r[l-1])}}function q(e){return Object.keys(e)}function Ft(e,t=void 0){const r=et();return r?.provides[e]||Yt(e,t)}function gr(e,t,r){if(Array.isArray(e)){const a=[...e],o=a.findIndex(l=>z(l,t));return o>=0?a.splice(o,1):a.push(t),a}return z(e,t)?r:t}function yt(e,t=0){let r=null,a=[];return function(...o){return r&&clearTimeout(r),r=setTimeout(()=>{const l=e(...o);a.forEach(f=>f(l)),a=[]},t),new Promise(l=>a.push(l))}}function _r(e,t){return ve(t)&&t.number?or(e):e}function Xe(e,t){let r;return async function(...o){const l=e(...o);r=l;const f=await l;return l!==r?f:(r=void 0,t(f,o))}}function Je(e){return Array.isArray(e)?e:e?[e]:[]}function Ie(e,t){const r={};for(const a in e)t.includes(a)||(r[a]=e[a]);return r}function Vr(e){let t=null,r=[];return function(...a){const o=J(()=>{if(t!==o)return;const l=e(...a);r.forEach(f=>f(l)),r=[],t=null});return t=o,new Promise(l=>r.push(l))}}function He(e){if(Pt(e))return e._value}function Pt(e){return"_value"in e}function Or(e){return e.type==="number"||e.type==="range"?Number.isNaN(e.valueAsNumber)?e.value:e.valueAsNumber:e.value}function Ne(e){if(!It(e))return e;const t=e.target;if(jt(t.type)&&Pt(t))return He(t);if(t.type==="file"&&t.files){const r=Array.from(t.files);return t.multiple?r:r[0]}if(yr(t))return Array.from(t.options).filter(r=>r.selected&&!r.disabled).map(He);if(wt(t)){const r=Array.from(t.options).find(a=>a.selected);return r?He(r):t.value}return Or(t)}function Ct(e){const t={};return Object.defineProperty(t,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?ve(e)&&e._$$isNormalized?e:ve(e)?Object.keys(e).reduce((r,a)=>{const o=Sr(e[a]);return e[a]!==!1&&(r[a]=bt(o)),r},t):typeof e!="string"?t:e.split("|").reduce((r,a)=>{const o=Ar(a);return o.name&&(r[o.name]=bt(o.params)),r},t):t}function Sr(e){return e===!0?[]:Array.isArray(e)||ve(e)?e:[e]}function bt(e){const t=r=>typeof r=="string"&&r[0]==="@"?Er(r.slice(1)):r;return Array.isArray(e)?e.map(t):e instanceof RegExp?[e]:Object.keys(e).reduce((r,a)=>(r[a]=t(e[a]),r),{})}const Ar=e=>{let t=[];const r=e.split(":")[0];return e.includes(":")&&(t=e.split(":").slice(1).join(":").split(",")),{name:r,params:t}};function Er(e){const t=r=>{var a;return(a=L(r,e))!==null&&a!==void 0?a:r[e]};return t.__locatorRef=e,t}function jr(e){return Array.isArray(e)?e.filter(Qe):q(e).filter(t=>Qe(e[t])).map(t=>e[t])}const wr={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let Ir=Object.assign({},wr);const Oe=()=>Ir;async function Nt(e,t,r={}){const a=r?.bails,o={name:r?.name||"{field}",rules:t,label:r?.label,bails:a??!0,formData:r?.values||{}},l=await Fr(o,e);return Object.assign(Object.assign({},l),{valid:!l.errors.length})}async function Fr(e,t){const r=e.rules;if(Q(r)||Ce(r))return Cr(t,Object.assign(Object.assign({},e),{rules:r}));if($(r)||Array.isArray(r)){const d={field:e.label||e.name,name:e.name,label:e.label,form:e.formData,value:t},v=Array.isArray(r)?r:[r],s=v.length,y=[];for(let O=0;O<s;O++){const A=v[O],g=await A(t,d);if(!(typeof g!="string"&&!Array.isArray(g)&&g)){if(Array.isArray(g))y.push(...g);else{const x=typeof g=="string"?g:Mt(d);y.push(x)}if(e.bails)return{errors:y}}}return{errors:y}}const a=Object.assign(Object.assign({},e),{rules:Ct(r)}),o=[],l=Object.keys(a.rules),f=l.length;for(let d=0;d<f;d++){const v=l[d],s=await Nr(a,t,{name:v,params:a.rules[v]});if(s.error&&(o.push(s.error),e.bails))return{errors:o}}return{errors:o}}function Pr(e){return!!e&&e.name==="ValidationError"}function kt(e){return{__type:"VVTypedSchema",async parse(r,a){var o;try{return{output:await e.validate(r,{abortEarly:!1,context:a?.formData||{}}),errors:[]}}catch(l){if(!Pr(l))throw l;if(!(!((o=l.inner)===null||o===void 0)&&o.length)&&l.errors.length)return{errors:[{path:l.path,errors:l.errors}]};const f=l.inner.reduce((d,v)=>{const s=v.path||"";return d[s]||(d[s]={errors:[],path:s}),d[s].errors.push(...v.errors),d},{});return{errors:Object.values(f)}}}}}async function Cr(e,t){const a=await(Q(t.rules)?t.rules:kt(t.rules)).parse(e,{formData:t.formData}),o=[];for(const l of a.errors)l.errors.length&&o.push(...l.errors);return{value:a.value,errors:o}}async function Nr(e,t,r){const a=dr(r.name);if(!a)throw new Error(`No such validator '${r.name}' exists.`);const o=kr(r.params,e.formData),l={field:e.label||e.name,name:e.name,label:e.label,value:t,form:e.formData,rule:Object.assign(Object.assign({},r),{params:o})},f=await a(t,o,l);return typeof f=="string"?{error:f}:{error:f?void 0:Mt(l)}}function Mt(e){const t=Oe().generateMessage;return t?t(e):"Field is invalid"}function kr(e,t){const r=a=>Qe(a)?a(t):a;return Array.isArray(e)?e.map(r):Object.keys(e).reduce((a,o)=>(a[o]=r(e[o]),a),{})}async function Mr(e,t){const a=await(Q(e)?e:kt(e)).parse(w(t),{formData:w(t)}),o={},l={};for(const f of a.errors){const d=f.errors,v=(f.path||"").replace(/\["(\d+)"\]/g,(s,y)=>`[${y}]`);o[v]={valid:!d.length,errors:d},d.length&&(l[v]=d[0])}return{valid:!a.errors.length,results:o,errors:l,values:a.value,source:"schema"}}async function Tr(e,t,r){const o=q(e).map(async s=>{var y,O,A;const g=(y=r?.names)===null||y===void 0?void 0:y[s],N=await Nt(L(t,s),e[s],{name:g?.name||s,label:g?.label,values:t,bails:(A=(O=r?.bailsMap)===null||O===void 0?void 0:O[s])!==null&&A!==void 0?A:!0});return Object.assign(Object.assign({},N),{path:s})});let l=!0;const f=await Promise.all(o),d={},v={};for(const s of f)d[s.path]={valid:s.valid,errors:s.errors},s.valid||(l=!1,v[s.path]=s.errors[0]);return{valid:l,results:d,errors:v,source:"schema"}}let gt=0;function Br(e,t){const{value:r,initialValue:a,setInitialValue:o}=Rr(e,t.modelValue,t.form);if(!t.form){let v=function(g){var N;"value"in g&&(r.value=g.value),"errors"in g&&y(g.errors),"touched"in g&&(A.touched=(N=g.touched)!==null&&N!==void 0?N:A.touched),"initialValue"in g&&o(g.initialValue)};const{errors:s,setErrors:y}=Dr(),O=gt>=Number.MAX_SAFE_INTEGER?0:++gt,A=zr(r,a,s,t.schema);return{id:O,path:e,value:r,initialValue:a,meta:A,flags:{pendingUnmount:{[O]:!1},pendingReset:!1},errors:s,setState:v}}const l=t.form.createPathState(e,{bails:t.bails,label:t.label,type:t.type,validate:t.validate,schema:t.schema}),f=j(()=>l.errors);function d(v){var s,y,O;"value"in v&&(r.value=v.value),"errors"in v&&((s=t.form)===null||s===void 0||s.setFieldError(_(e),v.errors)),"touched"in v&&((y=t.form)===null||y===void 0||y.setFieldTouched(_(e),(O=v.touched)!==null&&O!==void 0?O:!1)),"initialValue"in v&&o(v.initialValue)}return{id:Array.isArray(l.id)?l.id[l.id.length-1]:l.id,path:e,value:r,errors:f,meta:l,initialValue:a,flags:l.__flags,setState:d}}function Rr(e,t,r){const a=Z(_(t));function o(){return r?L(r.initialValues.value,_(e),_(a)):_(a)}function l(s){if(!r){a.value=s;return}r.setFieldInitialValue(_(e),s,!0)}const f=j(o);if(!r)return{value:Z(o()),initialValue:f,setInitialValue:l};const d=Ur(t,r,f,e);return r.stageInitialValue(_(e),d,!0),{value:j({get(){return L(r.values,_(e))},set(s){r.setFieldValue(_(e),s,!1)}}),initialValue:f,setInitialValue:l}}function Ur(e,t,r,a){return Se(e)?_(e):e!==void 0?e:L(t.values,_(a),_(r))}function zr(e,t,r,a){const o=j(()=>{var f,d,v;return(v=(d=(f=h(a))===null||f===void 0?void 0:f.describe)===null||d===void 0?void 0:d.call(f).required)!==null&&v!==void 0?v:!1}),l=Pe({touched:!1,pending:!1,valid:!0,required:o,validated:!!_(r).length,initialValue:j(()=>_(t)),dirty:j(()=>!z(_(e),_(t)))});return fe(r,f=>{l.valid=!f.length},{immediate:!0,flush:"sync"}),l}function Dr(){const e=Z([]);return{errors:e,setErrors:t=>{e.value=Je(t)}}}function $r(e,t,r){return jt(void 0)?qr(e,t):Tt(e,t)}function Tt(e,t,r){const{initialValue:a,validateOnMount:o,bails:l,type:f,checkedValue:d,label:v,validateOnValueUpdate:s,uncheckedValue:y,controlled:O,keepValueOnUnmount:A,syncVModel:g,form:N}=Lr(),x=O?Ft(rt):void 0,E=N||x,W=j(()=>Ve(h(e))),Y=j(()=>{if(h(E?.schema))return;const S=_(t);return Ce(S)||Q(S)||$(S)||Array.isArray(S)?S:Ct(S)}),Me=!$(Y.value)&&Q(h(t)),{id:me,value:he,initialValue:ue,meta:M,setState:pe,errors:Ee,flags:se}=Br(W,{modelValue:a,form:E,bails:l,label:v,type:f,validate:Y.value?ae:void 0,schema:Me?t:void 0}),K=j(()=>Ee.value[0]);g&&xr({value:he,prop:g,handleChange:T,shouldValidate:()=>s&&!se.pendingReset});const ye=(m,S=!1)=>{M.touched=!0,S&&ie()};async function je(m){var S,F;if(E?.validateSchema){const{results:I}=await E.validateSchema(m);return(S=I[h(W)])!==null&&S!==void 0?S:{valid:!0,errors:[]}}return Y.value?Nt(he.value,Y.value,{name:h(W),label:h(v),values:(F=E?.values)!==null&&F!==void 0?F:{},bails:l}):{valid:!0,errors:[]}}const ie=Xe(async()=>(M.pending=!0,M.validated=!0,je("validated-only")),m=>(se.pendingUnmount[U.id]||(pe({errors:m.errors}),M.pending=!1,M.valid=m.valid),m)),ee=Xe(async()=>je("silent"),m=>(M.valid=m.valid,m));function ae(m){return m?.mode==="silent"?ee():ie()}function T(m,S=!0){const F=Ne(m);ge(F,S)}Vt(()=>{if(o)return ie();(!E||!E.validateSchema)&&ee()});function Te(m){M.touched=m}function le(m){var S;const F=m&&"value"in m?m.value:ue.value;pe({value:w(F),initialValue:w(F),touched:(S=m?.touched)!==null&&S!==void 0?S:!1,errors:m?.errors||[]}),M.pending=!1,M.validated=!1,ee()}const ce=et();function ge(m,S=!0){he.value=ce&&g?_r(m,ce.props.modelModifiers):m,(S?ie:ee)()}function we(m){pe({errors:Array.isArray(m)?m:[m]})}const it=j({get(){return he.value},set(m){ge(m,s)}}),U={id:me,name:W,label:v,value:it,meta:M,errors:Ee,errorMessage:K,type:f,checkedValue:d,uncheckedValue:y,bails:l,keepValueOnUnmount:A,resetField:le,handleReset:()=>le(),validate:ae,handleChange:T,handleBlur:ye,setState:pe,setTouched:Te,setErrors:we,setValue:ge};if(Ye(vr,U),Se(t)&&typeof _(t)!="function"&&fe(t,(m,S)=>{z(m,S)||(M.validated?ie():ee())},{deep:!0}),!E)return U;const Be=j(()=>{const m=Y.value;return!m||$(m)||Ce(m)||Q(m)||Array.isArray(m)?{}:Object.keys(m).reduce((S,F)=>{const I=jr(m[F]).map(te=>te.__locatorRef).reduce((te,X)=>{const G=L(E.values,X)||E.values[X];return G!==void 0&&(te[X]=G),te},{});return Object.assign(S,I),S},{})});return fe(Be,(m,S)=>{if(!Object.keys(m).length)return;!z(m,S)&&(M.validated?ie():ee())}),Ht(()=>{var m;const S=(m=h(U.keepValueOnUnmount))!==null&&m!==void 0?m:h(E.keepValuesOnUnmount),F=h(W);if(S||!E||se.pendingUnmount[U.id]){E?.removePathState(F,me);return}se.pendingUnmount[U.id]=!0;const I=E.getPathState(F);if(Array.isArray(I?.id)&&I?.multiple?I?.id.includes(U.id):I?.id===U.id){if(I?.multiple&&Array.isArray(I.value)){const X=I.value.findIndex(G=>z(G,h(U.checkedValue)));if(X>-1){const G=[...I.value];G.splice(X,1),E.setFieldValue(F,G)}Array.isArray(I.id)&&I.id.splice(I.id.indexOf(U.id),1)}else E.unsetPathValue(h(W));E.removePathState(F,me)}}),U}function Lr(e){return Object.assign(Object.assign({},{initialValue:void 0,validateOnMount:!1,bails:!0,label:void 0,validateOnValueUpdate:!0,keepValueOnUnmount:void 0,syncVModel:!1,controlled:!0}),{initialValue:void 0})}function qr(e,t,r){const a=Ft(rt),o=void 0,l=void 0;function f(d){const v=d.handleChange,s=j(()=>{const O=h(d.value),A=h(o);return Array.isArray(O)?O.findIndex(g=>z(g,A))>=0:z(A,O)});function y(O,A=!0){var g,N;if(s.value===((g=O?.target)===null||g===void 0?void 0:g.checked)){A&&d.validate();return}const x=h(e),E=a?.getPathState(x),W=Ne(O);let Y=(N=h(o))!==null&&N!==void 0?N:W;a&&E?.multiple&&E.type==="checkbox"&&(Y=gr(L(a.values,x)||[],Y,void 0)),v(Y,A)}return Object.assign(Object.assign({},d),{checked:s,checkedValue:o,uncheckedValue:l,handleChange:y})}return f(Tt(e,t))}function xr({prop:e,value:t,handleChange:r,shouldValidate:a}){const o=et();if(!o||!e)return;const l=typeof e=="string"?e:"modelValue",f=`update:${l}`;l in o.props&&(fe(t,d=>{z(d,_t(o,l))||o.emit(f,d)}),fe(()=>_t(o,l),d=>{if(d===vt&&t.value===void 0)return;const v=d===vt?void 0:d;z(v,t.value)||r(v,a())}))}function _t(e,t){if(e)return e.props[t]}let Wr=0;const Fe=["bails","fieldsCount","id","multiple","type","validate"];function Bt(e){const t=e?.initialValues||{},r=Object.assign({},h(t)),a=_(e?.validationSchema);return a&&Q(a)&&$(a.cast)?w(a.cast(r)||{}):w(r)}function Kr(e){var t;const r=Wr++,a=e?.name||"Form";let o=0;const l=Z(!1),f=Z(!1),d=Z(0),v=[],s=Pe(Bt(e)),y=Z([]),O=Z({}),A=Z({}),g=Vr(()=>{A.value=y.value.reduce((i,n)=>(i[Ve(h(n.path))]=n,i),{})});function N(i,n){const u=T(i);if(!u){typeof i=="string"&&(O.value[Ve(i)]=Je(n));return}if(typeof i=="string"){const c=Ve(i);O.value[c]&&delete O.value[c]}u.errors=Je(n),u.valid=!u.errors.length}function x(i){q(i).forEach(n=>{N(n,i[n])})}e?.initialErrors&&x(e.initialErrors);const E=j(()=>{const i=y.value.reduce((n,u)=>(u.errors.length&&(n[h(u.path)]=u.errors),n),{});return Object.assign(Object.assign({},O.value),i)}),W=j(()=>q(E.value).reduce((i,n)=>{const u=E.value[n];return u?.length&&(i[n]=u[0]),i},{})),Y=j(()=>y.value.reduce((i,n)=>(i[h(n.path)]={name:h(n.path)||"",label:n.label||""},i),{})),Me=j(()=>y.value.reduce((i,n)=>{var u;return i[h(n.path)]=(u=n.bails)!==null&&u!==void 0?u:!0,i},{})),me=Object.assign({},e?.initialErrors||{}),he=(t=e?.keepValuesOnUnmount)!==null&&t!==void 0?t:!1,{initialValues:ue,originalInitialValues:M,setInitialValues:pe}=Hr(y,s,e),Ee=Gr(y,s,M,W),se=j(()=>y.value.reduce((i,n)=>{const u=L(s,h(n.path));return re(i,h(n.path),u),i},{})),K=e?.validationSchema;function ye(i,n){var u,c;const b=j(()=>L(ue.value,h(i))),V=A.value[h(i)],p=n?.type==="checkbox"||n?.type==="radio";if(V&&p){V.multiple=!0;const H=o++;return Array.isArray(V.id)?V.id.push(H):V.id=[V.id,H],V.fieldsCount++,V.__flags.pendingUnmount[H]=!1,V}const C=j(()=>L(s,h(i))),k=h(i),B=le.findIndex(H=>H===k);B!==-1&&le.splice(B,1);const P=j(()=>{var H,_e,$e,Le;const qe=h(K);if(Q(qe))return(_e=(H=qe.describe)===null||H===void 0?void 0:H.call(qe,h(i)).required)!==null&&_e!==void 0?_e:!1;const xe=h(n?.schema);return Q(xe)&&(Le=($e=xe.describe)===null||$e===void 0?void 0:$e.call(xe).required)!==null&&Le!==void 0?Le:!1}),R=o++,D=Pe({id:R,path:i,touched:!1,pending:!1,valid:!0,validated:!!(!((u=me[k])===null||u===void 0)&&u.length),required:P,initialValue:b,errors:Gt([]),bails:(c=n?.bails)!==null&&c!==void 0?c:!1,label:n?.label,type:n?.type||"default",value:C,multiple:!1,__flags:{pendingUnmount:{[R]:!1},pendingReset:!1},fieldsCount:1,validate:n?.validate,dirty:j(()=>!z(_(C),_(b)))});return y.value.push(D),A.value[k]=D,g(),W.value[k]&&!me[k]&&J(()=>{de(k,{mode:"silent"})}),Se(i)&&fe(i,H=>{g();const _e=w(C.value);A.value[H]=D,J(()=>{re(s,H,_e)})}),D}const je=yt(ot,5),ie=yt(ot,5),ee=Xe(async i=>await(i==="silent"?je():ie()),(i,[n])=>{const u=q(S.errorBag.value),b=[...new Set([...q(i.results),...y.value.map(V=>V.path),...u])].sort().reduce((V,p)=>{var C;const k=p,B=T(k)||Te(k),P=((C=i.results[k])===null||C===void 0?void 0:C.errors)||[],R=h(B?.path)||k,D=Yr({errors:P,valid:!P.length},V.results[R]);return V.results[R]=D,D.valid||(V.errors[R]=D.errors[0]),B&&O.value[R]&&delete O.value[R],B?(B.valid=D.valid,n==="silent"||n==="validated-only"&&!B.validated||N(B,D.errors),V):(N(R,P),V)},{valid:i.valid,results:{},errors:{},source:i.source});return i.values&&(b.values=i.values,b.source=i.source),q(b.results).forEach(V=>{var p;const C=T(V);C&&n!=="silent"&&(n==="validated-only"&&!C.validated||N(C,(p=b.results[V])===null||p===void 0?void 0:p.errors))}),b});function ae(i){y.value.forEach(i)}function T(i){const n=typeof i=="string"?Ve(i):i;return typeof n=="string"?A.value[n]:n}function Te(i){return y.value.filter(u=>i.startsWith(h(u.path))).reduce((u,c)=>u?c.path.length>u.path.length?c:u:c,void 0)}let le=[],ce;function ge(i){return le.push(i),ce||(ce=J(()=>{[...le].sort().reverse().forEach(u=>{pt(s,u)}),le=[],ce=null})),ce}function we(i){return function(u,c){return function(V){return V instanceof Event&&(V.preventDefault(),V.stopPropagation()),ae(p=>p.touched=!0),l.value=!0,d.value++,be().then(p=>{const C=w(s);if(p.valid&&typeof u=="function"){const k=w(se.value);let B=i?k:C;return p.values&&(B=p.source==="schema"?p.values:Object.assign({},B,p.values)),u(B,{evt:V,controlledValues:k,setErrors:x,setFieldError:N,setTouched:Re,setFieldTouched:G,setValues:te,setFieldValue:F,resetForm:Ue,resetField:at})}!p.valid&&typeof c=="function"&&c({values:C,evt:V,errors:p.errors,results:p.results})}).then(p=>(l.value=!1,p),p=>{throw l.value=!1,p})}}}const U=we(!1);U.withControlled=we(!0);function Be(i,n){const u=y.value.findIndex(b=>b.path===i&&(Array.isArray(b.id)?b.id.includes(n):b.id===n)),c=y.value[u];if(!(u===-1||!c)){if(J(()=>{de(i,{mode:"silent",warn:!1})}),c.multiple&&c.fieldsCount&&c.fieldsCount--,Array.isArray(c.id)){const b=c.id.indexOf(n);b>=0&&c.id.splice(b,1),delete c.__flags.pendingUnmount[n]}(!c.multiple||c.fieldsCount<=0)&&(y.value.splice(u,1),lt(i),g(),delete A.value[i])}}function m(i){q(A.value).forEach(n=>{n.startsWith(i)&&delete A.value[n]}),y.value=y.value.filter(n=>!n.path.startsWith(i)),J(()=>{g()})}const S={name:a,formId:r,values:s,controlledValues:se,errorBag:E,errors:W,schema:K,submitCount:d,meta:Ee,isSubmitting:l,isValidating:f,fieldArrays:v,keepValuesOnUnmount:he,validateSchema:_(K)?ee:void 0,validate:be,setFieldError:N,validateField:de,setFieldValue:F,setValues:te,setErrors:x,setFieldTouched:G,setTouched:Re,resetForm:Ue,resetField:at,handleSubmit:U,useFieldModel:Lt,defineInputBinds:qt,defineComponentBinds:xt,defineField:De,stageInitialValue:Dt,unsetInitialValue:lt,setFieldInitialValue:ze,createPathState:ye,getPathState:T,unsetPathValue:ge,removePathState:Be,initialValues:ue,getAllPathStates:()=>y.value,destroyPath:m,isFieldTouched:Rt,isFieldDirty:Ut,isFieldValid:zt};function F(i,n,u=!0){const c=w(n),b=typeof i=="string"?i:i.path;T(b)||ye(b),re(s,b,c),u&&de(b)}function I(i,n=!0){q(s).forEach(u=>{delete s[u]}),q(i).forEach(u=>{F(u,i[u],!1)}),n&&be()}function te(i,n=!0){Ae(s,i),v.forEach(u=>u&&u.reset()),n&&be()}function X(i,n){const u=T(h(i))||ye(i);return j({get(){return u.value},set(c){var b;const V=h(i);F(V,c,(b=h(n))!==null&&b!==void 0?b:!1)}})}function G(i,n){const u=T(i);u&&(u.touched=n)}function Rt(i){const n=T(i);return n?n.touched:y.value.filter(u=>u.path.startsWith(i)).some(u=>u.touched)}function Ut(i){const n=T(i);return n?n.dirty:y.value.filter(u=>u.path.startsWith(i)).some(u=>u.dirty)}function zt(i){const n=T(i);return n?n.valid:y.value.filter(u=>u.path.startsWith(i)).every(u=>u.valid)}function Re(i){if(typeof i=="boolean"){ae(n=>{n.touched=i});return}q(i).forEach(n=>{G(n,!!i[n])})}function at(i,n){var u;const c=n&&"value"in n?n.value:L(ue.value,i),b=T(i);b&&(b.__flags.pendingReset=!0),ze(i,w(c),!0),F(i,c,!1),G(i,(u=n?.touched)!==null&&u!==void 0?u:!1),N(i,n?.errors||[]),J(()=>{b&&(b.__flags.pendingReset=!1)})}function Ue(i,n){let u=w(i?.values?i.values:M.value);u=n?.force?u:Ae(M.value,u),u=Q(K)&&$(K.cast)?K.cast(u):u,pe(u,{force:n?.force}),ae(c=>{var b;c.__flags.pendingReset=!0,c.validated=!1,c.touched=((b=i?.touched)===null||b===void 0?void 0:b[h(c.path)])||!1,F(h(c.path),L(u,h(c.path)),!1),N(h(c.path),void 0)}),n?.force?I(u,!1):te(u,!1),x(i?.errors||{}),d.value=i?.submitCount||0,J(()=>{be({mode:"silent"}),ae(c=>{c.__flags.pendingReset=!1})})}async function be(i){const n=i?.mode||"force";if(n==="force"&&ae(p=>p.validated=!0),S.validateSchema)return S.validateSchema(n);f.value=!0;const u=await Promise.all(y.value.map(p=>p.validate?p.validate(i).then(C=>({key:h(p.path),valid:C.valid,errors:C.errors,value:C.value})):Promise.resolve({key:h(p.path),valid:!0,errors:[],value:void 0})));f.value=!1;const c={},b={},V={};for(const p of u)c[p.key]={valid:p.valid,errors:p.errors},p.value&&re(V,p.key,p.value),p.errors.length&&(b[p.key]=p.errors[0]);return{valid:u.every(p=>p.valid),results:c,errors:b,values:V,source:"fields"}}async function de(i,n){var u;const c=T(i);if(c&&n?.mode!=="silent"&&(c.validated=!0),K){const{results:b}=await ee(n?.mode||"validated-only");return b[i]||{errors:[],valid:!0}}return c?.validate?c.validate(n):(!c&&(u=n?.warn),Promise.resolve({errors:[],valid:!0}))}function lt(i){pt(ue.value,i)}function Dt(i,n,u=!1){ze(i,n),re(s,i,n),u&&!e?.initialValues&&re(M.value,i,w(n))}function ze(i,n,u=!1){re(ue.value,i,w(n)),u&&re(M.value,i,w(n))}async function ot(){const i=_(K);if(!i)return{valid:!0,results:{},errors:{},source:"none"};f.value=!0;const n=Ce(i)||Q(i)?await Mr(i,s):await Tr(i,s,{names:Y.value,bailsMap:Me.value});return f.value=!1,n}const $t=U((i,{evt:n})=>{br(n)&&n.target.submit()});Vt(()=>{if(e?.initialErrors&&x(e.initialErrors),e?.initialTouched&&Re(e.initialTouched),e?.validateOnMount){be();return}S.validateSchema&&S.validateSchema("silent")}),Se(K)&&fe(K,()=>{var i;(i=S.validateSchema)===null||i===void 0||i.call(S,"validated-only")}),Ye(rt,S);function De(i,n){const u=$(n)?void 0:n?.label,c=T(h(i))||ye(i,{label:u}),b=()=>$(n)?n(Ie(c,Fe)):n||{};function V(){var P;c.touched=!0,((P=b().validateOnBlur)!==null&&P!==void 0?P:Oe().validateOnBlur)&&de(h(c.path))}function p(){var P;((P=b().validateOnInput)!==null&&P!==void 0?P:Oe().validateOnInput)&&J(()=>{de(h(c.path))})}function C(){var P;((P=b().validateOnChange)!==null&&P!==void 0?P:Oe().validateOnChange)&&J(()=>{de(h(c.path))})}const k=j(()=>{const P={onChange:C,onInput:p,onBlur:V};return $(n)?Object.assign(Object.assign({},P),n(Ie(c,Fe)).props||{}):n?.props?Object.assign(Object.assign({},P),n.props(Ie(c,Fe))):P});return[X(i,()=>{var P,R,D;return(D=(P=b().validateOnModelUpdate)!==null&&P!==void 0?P:(R=Oe())===null||R===void 0?void 0:R.validateOnModelUpdate)!==null&&D!==void 0?D:!0}),k]}function Lt(i){return Array.isArray(i)?i.map(n=>X(n,!0)):X(i)}function qt(i,n){const[u,c]=De(i,n);function b(){c.value.onBlur()}function V(C){const k=Ne(C);F(h(i),k,!1),c.value.onInput()}function p(C){const k=Ne(C);F(h(i),k,!1),c.value.onChange()}return j(()=>Object.assign(Object.assign({},c.value),{onBlur:b,onInput:V,onChange:p,value:u.value}))}function xt(i,n){const[u,c]=De(i,n),b=T(h(i));function V(p){u.value=p}return j(()=>{const p=$(n)?n(Ie(b,Fe)):n||{};return Object.assign({[p.model||"modelValue"]:u.value,[`onUpdate:${p.model||"modelValue"}`]:V},c.value)})}const ut=Object.assign(Object.assign({},S),{values:Wt(s),handleReset:()=>Ue(),submitForm:$t});return Ye(fr,ut),ut}function Gr(e,t,r,a){const o={touched:"some",pending:"some",valid:"every"},l=j(()=>!z(t,_(r)));function f(){const v=e.value;return q(o).reduce((s,y)=>{const O=o[y];return s[y]=v[O](A=>A[y]),s},{})}const d=Pe(f());return Kt(()=>{const v=f();d.touched=v.touched,d.valid=v.valid,d.pending=v.pending}),j(()=>Object.assign(Object.assign({initialValues:_(r)},d),{valid:d.valid&&!q(a.value).length,dirty:l.value}))}function Hr(e,t,r){const a=Bt(r),o=Z(a),l=Z(w(a));function f(d,v){v?.force?(o.value=w(d),l.value=w(d)):(o.value=Ae(w(o.value)||{},w(d)),l.value=Ae(w(l.value)||{},w(d))),v?.updateFields&&e.value.forEach(s=>{if(s.touched)return;const O=L(o.value,h(s.path));re(t,h(s.path),w(O))})}return{initialValues:o,originalInitialValues:l,setInitialValues:f}}function Yr(e,t){return t?{valid:e.valid&&t.valid,errors:[...e.errors,...t.errors]}:e}function Zr(){const{t:e}=Ot();return{validateEmail:r=>{if(!r)return e("email.error.required");const a=r.trim();return a?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(a)?a.length>50?e("email.error.tooLong"):!0:e("email.error.invalid"):e("email.error.required")}}}const Qr={class:"base-input"},Xr={for:"email",class:"base-input__label"},Jr={class:"base-input__label-text"},en=["type","inputmode","autocomplete","placeholder","aria-invalid","aria-describedby","disabled","required"],tn={key:0,id:"base-input-error",class:"base-input__error"},rn=St({__name:"BaseInput",props:{modelValue:{},placeholder:{default:""},type:{default:"email"},autoFocus:{type:Boolean,default:!1},label:{},disabled:{type:Boolean},required:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const r=e,a=t,o=j({get:()=>r.modelValue,set:l=>a("update:modelValue",l)});return(l,f)=>(Ze(),st("div",Qr,[ne("label",Xr,[ne("span",Jr,oe(l.label),1),Qt(ne("input",{id:"email",class:"base-input__field","onUpdate:modelValue":f[0]||(f[0]=d=>o.value=d),type:l.type,inputmode:l.type==="email"?"email":l.type==="tel"?"tel":"text",autocomplete:l.type,autocapitalize:"off",spellcheck:"false",placeholder:l.placeholder,"aria-invalid":!!l.$slots.error,"aria-describedby":l.$slots.error?"base-input-error":void 0,disabled:l.disabled,required:l.required},null,8,en),[[Xt,o.value]])]),l.$slots.error?(Ze(),st("p",tn,[Jt(l.$slots,"error",{},void 0,!0)])):Zt("",!0)]))}}),nn=At(rn,[["__scopeId","data-v-2d3661cc"]]),an={class:"title"},ln={class:"subtitle"},on=["aria-label"],un={class:"email-form__legal",role:"note"},sn={href:"#",class:"email-form__link",target:"_blank",rel:"noopener noreferrer"},cn={href:"#",class:"email-form__link",target:"_blank",rel:"noopener noreferrer"},dn=St({__name:"EmailView",setup(e){const t=tr(),{t:r}=Ot(),a=er(),{validateEmail:o}=Zr(),{handleSubmit:l,meta:f}=Kr({validationSchema:{email:o},initialValues:{email:a.email??""}}),{value:d,errorMessage:v}=$r("email"),s=l(async O=>{try{const A=O.email.trim();a.setEmail(A),await t.replace({name:"final"})}catch(A){console.error("Failed to submit email:",A)}}),y=j(()=>r("email.form_label"));return(O,A)=>(Ze(),rr(ar,null,{header:We(()=>[ne("h1",an,oe(_(r)("email.title")),1),ne("p",ln,oe(_(r)("email.subtitle")),1)]),default:We(()=>[ne("form",{class:"email-form",onSubmit:A[1]||(A[1]=ir((...g)=>_(s)&&_(s)(...g),["prevent"])),"aria-label":y.value,novalidate:""},[ct(nn,{modelValue:_(d),"onUpdate:modelValue":A[0]||(A[0]=g=>Se(d)?d.value=g:null),placeholder:_(r)("email.placeholder"),type:"email",label:_(r)("email.label"),autoFocus:""},nr({_:2},[_(v)?{name:"error",fn:We(()=>[Ke(oe(_(v)),1)]),key:"0"}:void 0]),1032,["modelValue","placeholder","label"]),ne("p",un,[Ke(oe(_(r)("email.legal.prefix"))+" ",1),ne("a",sn,oe(_(r)("email.legal.privacy")),1),Ke(" "+oe(_(r)("email.legal.and"))+" ",1),ne("a",cn,oe(_(r)("email.legal.terms")),1)]),ct(lr,{disabled:!_(f).valid,type:"submit",title:_(r)("button.next"),class:"email-form__submit"},null,8,["disabled","title"])],40,on)]),_:1}))}}),hn=At(dn,[["__scopeId","data-v-45c7d431"]]);export{hn as default};
